<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Yihui Xie" />

<meta name="date" content="2014-12-30" />

<title>Write An R Package Using Literate Programming Techniques</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<link href="data:text/css,body%20%7B%0A%20%20background%2Dcolor%3A%20%23fff%3B%0A%20%20margin%3A%201em%20auto%3B%0A%20%20max%2Dwidth%3A%20800px%3B%0A%20%20overflow%3A%20visible%3B%0A%20%20padding%2Dleft%3A%202em%3B%0A%20%20padding%2Dright%3A%202em%3B%0A%20%20font%2Dfamily%3A%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0A%20%20font%2Dsize%3A%2014px%3B%0A%20%20line%2Dheight%3A%2020px%3B%0A%7D%0A%0A%23header%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0A%0A%23TOC%20%7B%0A%20%20clear%3A%20both%3B%0A%20%20margin%3A%200%200%2010px%200%3B%0A%20%20padding%3A%204px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20border%2Dradius%3A%205px%3B%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20font%2Dsize%3A%2013px%3B%0A%20%20line%2Dheight%3A%201%2E3%3B%0A%7D%0A%20%20%23TOC%20%2Etoctitle%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%20%20font%2Dsize%3A%2015px%3B%0A%20%20%20%20margin%2Dleft%3A%205px%3B%0A%20%20%7D%0A%0A%20%20%23TOC%20ul%20%7B%0A%20%20%20%20padding%2Dleft%3A%2040px%3B%0A%20%20%20%20margin%2Dleft%3A%20%2D1%2E5em%3B%0A%20%20%20%20margin%2Dtop%3A%205px%3B%0A%20%20%20%20margin%2Dbottom%3A%205px%3B%0A%20%20%7D%0A%20%20%23TOC%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dleft%3A%20%2D2em%3B%0A%20%20%7D%0A%20%20%23TOC%20li%20%7B%0A%20%20%20%20line%2Dheight%3A%2016px%3B%0A%20%20%7D%0A%0Atable%20%7B%0A%20%20margin%3A%20auto%3B%0A%20%20min%2Dwidth%3A%2040%25%3B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dcolor%3A%20%23DDDDDD%3B%0A%20%20border%2Dstyle%3A%20outset%3B%0A%20%20border%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%5Bsummary%3D%22R%20argblock%22%5D%20%7B%0A%20%20width%3A%20100%25%3B%0A%20%20border%3A%20none%3B%0A%7D%0Atable%20th%20%7B%0A%20%20border%2Dwidth%3A%202px%3B%0A%20%20padding%3A%205px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0A%20%20border%2Dwidth%3A%201px%3B%0A%20%20border%2Dstyle%3A%20inset%3B%0A%20%20line%2Dheight%3A%2018px%3B%0A%20%20padding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0A%20%20border%2Dleft%2Dstyle%3A%20none%3B%0A%20%20border%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20tr%2Eodd%20%7B%0A%20%20background%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0A%0Ap%20%7B%0A%20%20margin%3A%200%2E5em%200%3B%0A%7D%0A%0Ablockquote%20%7B%0A%20%20background%2Dcolor%3A%20%23f6f6f6%3B%0A%20%20padding%3A%2013px%3B%0A%20%20padding%2Dbottom%3A%201px%3B%0A%7D%0A%0Ahr%20%7B%0A%20%20border%2Dstyle%3A%20solid%3B%0A%20%20border%3A%20none%3B%0A%20%20border%2Dtop%3A%201px%20solid%20%23777%3B%0A%20%20margin%3A%2028px%200%3B%0A%7D%0A%0Adl%20%7B%0A%20%20margin%2Dleft%3A%200%3B%0A%7D%0A%20%20dl%20dd%20%7B%0A%20%20%20%20margin%2Dbottom%3A%2013px%3B%0A%20%20%20%20margin%2Dleft%3A%2013px%3B%0A%20%20%7D%0A%20%20dl%20dt%20%7B%0A%20%20%20%20font%2Dweight%3A%20bold%3B%0A%20%20%7D%0A%0Aul%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%7D%0A%20%20ul%20li%20%7B%0A%20%20%20%20list%2Dstyle%3A%20circle%20outside%3B%0A%20%20%7D%0A%20%20ul%20ul%20%7B%0A%20%20%20%20margin%2Dbottom%3A%200%3B%0A%20%20%7D%0A%0Apre%2C%20code%20%7B%0A%20%20background%2Dcolor%3A%20%23f5f5f5%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20color%3A%20%23333%3B%0A%7D%0Apre%20%7B%0A%20%20overflow%2Dx%3A%20auto%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20margin%3A%205px%200px%2010px%200px%3B%0A%20%20padding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0A%20%20background%2Dcolor%3A%20white%3B%0A%20%20border%3A%20%23f5f5f5%201px%20solid%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20code%20%7B%0A%20%20color%3A%20%23444%3B%0A%20%20background%2Dcolor%3A%20white%3B%0A%7D%0Acode%20%7B%0A%20%20font%2Dfamily%3A%20monospace%3B%0A%20%20font%2Dsize%3A%2090%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0A%20%20padding%3A%202px%204px%3B%0A%20%20color%3A%20%23d14%3B%0A%20%20border%3A%201px%20solid%20%23e1e1e8%3B%0A%20%20white%2Dspace%3A%20inherit%3B%0A%7D%0Adiv%2Efigure%20%7B%0A%20%20text%2Dalign%3A%20center%3B%0A%7D%0Atable%20%3E%20caption%2C%20div%2Efigure%20p%2Ecaption%20%7B%0A%20%20font%2Dstyle%3A%20italic%3B%0A%7D%0Atable%20%3E%20caption%20span%2C%20div%2Efigure%20p%2Ecaption%20span%20%7B%0A%20%20font%2Dstyle%3A%20normal%3B%0A%20%20font%2Dweight%3A%20bold%3B%0A%7D%0Ap%20%7B%0A%20%20margin%3A%200%200%2010px%3B%0A%7D%0Atable%20%7B%0A%20%20margin%3A%20auto%20auto%2010px%20auto%3B%0A%7D%0A%0Aimg%20%7B%0A%20%20background%2Dcolor%3A%20%23FFFFFF%3B%0A%20%20padding%3A%202px%3B%0A%20%20border%3A%201px%20solid%20%23DDDDDD%3B%0A%20%20border%2Dradius%3A%203px%3B%0A%20%20border%3A%201px%20solid%20%23CCCCCC%3B%0A%20%20margin%3A%200%205px%3B%0A%20%20max%2Dwidth%3A%20100%25%3B%0A%7D%0A%0Ah1%20%7B%0A%20%20margin%2Dtop%3A%200%3B%0A%20%20font%2Dsize%3A%2035px%3B%0A%20%20line%2Dheight%3A%2040px%3B%0A%7D%0A%0Ah2%20%7B%0A%20%20border%2Dbottom%3A%204px%20solid%20%23f5f5f5%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20padding%2Dbottom%3A%202px%3B%0A%20%20font%2Dsize%3A%20145%25%3B%0A%7D%0A%0Ah3%20%7B%0A%20%20border%2Dbottom%3A%202px%20solid%20%23f5f5f5%3B%0A%20%20padding%2Dtop%3A%2010px%3B%0A%20%20font%2Dsize%3A%20120%25%3B%0A%7D%0A%0Ah4%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23f5f5f5%3B%0A%20%20margin%2Dleft%3A%208px%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Ah5%2C%20h6%20%7B%0A%20%20border%2Dbottom%3A%201px%20solid%20%23ccc%3B%0A%20%20font%2Dsize%3A%20105%25%3B%0A%7D%0A%0Aa%20%7B%0A%20%20color%3A%20%230033dd%3B%0A%20%20text%2Ddecoration%3A%20none%3B%0A%7D%0A%20%20a%3Ahover%20%7B%0A%20%20%20%20color%3A%20%236666ff%3B%20%7D%0A%20%20a%3Avisited%20%7B%0A%20%20%20%20color%3A%20%23800080%3B%20%7D%0A%20%20a%3Avisited%3Ahover%20%7B%0A%20%20%20%20color%3A%20%23BB00BB%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%20%20a%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0A%20%20%20%20text%2Ddecoration%3A%20underline%3B%20%7D%0A%0Adiv%2Er%2Dhelp%2Dpage%20%7B%0A%20%20background%2Dcolor%3A%20%23f9f9f9%3B%0A%20%20border%2Dbottom%3A%20%23ddd%201px%20solid%3B%0A%20%20margin%2Dbottom%3A%2010px%3B%0A%20%20padding%3A%2010px%3B%0A%7D%0Adiv%2Er%2Dhelp%2Dpage%3Ahover%20%7B%0A%20%20background%2Dcolor%3A%20%23f4f4f4%3B%0A%7D%0A%0A%2F%2A%20Class%20described%20in%20https%3A%2F%2Fbenjeffrey%2Ecom%2Fposts%2Fpandoc%2Dsyntax%2Dhighlighting%2Dcss%0A%20%20%20Colours%20from%20https%3A%2F%2Fgist%2Egithub%2Ecom%2Frobsimmons%2F1172277%20%2A%2F%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Keyword%20%2A%2F%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%2F%2A%20DataType%20%2A%2F%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%2F%2A%20DecVal%20%28decimal%20values%29%20%2A%2F%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20BaseN%20%2A%2F%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Float%20%2A%2F%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20Char%20%2A%2F%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%2F%2A%20String%20%2A%2F%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%2F%2A%20Comment%20%2A%2F%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%2F%2A%20OtherToken%20%2A%2F%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20AlertToken%20%2A%2F%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%2F%2A%20Function%20calls%20%2A%2F%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%2F%2A%20ErrorTok%20%2A%2F%0A%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div id="header">
<h1 class="title">Write An R Package Using Literate Programming Techniques</h1>
<h4 class="author"><em>Yihui Xie</em></h4>
<h4 class="date"><em>2014-12-30</em></h4>
</div>


<p>This is an example of writing an R package using the <a href="http://en.wikipedia.org/wiki/Literate_programming">Literate Programming</a> (LP) technique, implemented through the <strong>knitr</strong> package and Makefile. It only shows you the idea, and I do not mean you must use <strong>knitr</strong>, R Markdown, or Makefile. The full source code of this <strong>rlp</strong> package is available on Github: <a href="https://github.com/yihui/rlp">https://github.com/yihui/rlp</a>. To build this package, you need to install R packages <strong>knitr</strong> and <strong>rmarkdown</strong>. Windows users also need to install <a href="http://cran.rstudio.com/bin/windows/Rtools/">Rtools</a>, which includes the utility <code>make</code>. Linux and OS X users should have <code>make</code> ready by default.</p>
<div id="literate-programming" class="section level1">
<h1><span class="header-section-number">1</span> Literate Programming</h1>
<p>Interestingly, the most popular application of the LP paradigm seems to be documenting software (using a special form of comments) for users instead of “programming” for authors. In other words, we use LP to document the <em>usage</em> of software, instead of documenting the <em>source code</em>. See <a href="http://en.wikipedia.org/wiki/Doxygen">Doxygen</a>, <a href="http://en.wikipedia.org/wiki/Javadoc">Javadoc</a>, and <a href="http://cran.rstudio.com/package=roxygen2"><strong>roxygen2</strong></a> for examples. There exists one exception, though, in the LaTeX world<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. Some LaTeX package authors write both LaTeX code and documentation in a single document, and weave it into a PDF document that contains both the source code and documentation. I’m not a LaTeX expert, and it is probably well-known that I have big headache when looking at a full screen of backslashes, from <code>\documentclass{}</code>, <code>\begin{document}</code>, <code>\alpha</code>, <code>\beta</code>, <code>\texttt{}</code>, …, and all the way to <code>\end{document}</code>.</p>
<p>I do not find LP for LaTeX appealing, but that does not mean LP itself is not an appealing idea. On the contrary, I believe it can be very interesting and useful when it is applied to your own favorite language, e.g., R for me. In my opinion, LP has at least two advantages:</p>
<ol style="list-style-type: decimal">
<li>You can write much more extensive and richer documentation than you normally could do with comments. In general, comments in code are (or should be) brief and limited to plain text. Normally you will not write five paragraphs of comments to explain a few lines of code, and you cannot write readable<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> math expressions or embed a video in comments.</li>
<li>You can label code chunks and reference/reuse them using the labels, which allows you to compose your program flexibly using different pieces of code chunks. For example, you can define and explain a code chunk later in the document, but insert it in a previous code chunk using its label. This feature has been emphasized by Knuth, but I do not see it is widely adopted for some reason. Perhaps most people are more comfortable with designing a big program by smaller units like functions instead of code chunks, which is actually a good idea.</li>
</ol>
<p>Personally I find the first advantage more convincing, although it seems some LP folks just love the second one. For R package development, I guess it will be inconvenient for unit testing if we use the LP idea instead of writing smaller functions, because testing functions is straightforward, but testing code chunks is not. Anyway, I will show both features of LP mentioned above in this document.</p>
</div>
<div id="setup" class="section level1">
<h1><span class="header-section-number">2</span> Setup</h1>
<p>First, I set a few <strong>knitr</strong> chunk options:</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr::opts_chunk$<span class="kw">set</span>(<span class="dt">eval =</span> <span class="ot">FALSE</span>, <span class="dt">tidy =</span> <span class="ot">FALSE</span>)</code></pre>
<p>I set <code>eval = FALSE</code> because this document mostly serves as the documentation of our R source code, and I do not really need to run the code chunks here. The code will be generated to the <code>R/</code> directory, then built by <code>R CMD build</code> into an R package. If you do want to execute a code chunk, you can use the chunk option <code>eval = TRUE</code> on that code chunk. Another important reason that you may not want to evaluate some code chunks is that they may not be complete, for example, when you insert documentation in the middle of a function to explain a few lines of the function body.</p>
<p>In this document, you will see the chunk option <code>purl = FALSE</code> occasionally, and that means I want to exclude these code chunks when extracting the R code, but I do want to include them when compiling this document to HTML.</p>
</div>
<div id="r-code-chunks" class="section level1">
<h1><span class="header-section-number">3</span> R Code Chunks</h1>
<p>Now I write some example R code chunks using the R Markdown syntax. Here I define a boring function <code>add_one()</code> with an argument <code>x</code>, and it simply does <code>x + 1</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#' A cool function</span>
<span class="co">#' </span>
<span class="co">#' Well, not really cool. Just add 1 to x.</span>
<span class="co">#' @param x a numeric vector</span>
<span class="co">#' @export</span>
<span class="co">#' @examples</span>
<span class="co">#' add_one(1)</span>
<span class="co">#' add_one(1:10)</span>
add_one =<span class="st"> </span>function(x) {
  x +<span class="st"> </span><span class="dv">1</span>
}</code></pre>
<p>Besides the R source code, I also wrote the R documentation using the <strong>roxygen2</strong> syntax. This R code chunk will be extracted and placed under the <code>R/</code> directory later. The critical step is how to extract the code chunk. After this step, you will be in a familiar world of <code>roxygen2::roxygenize()</code>, or <code>devtools::build()</code>, or <code>R CMD build</code>, or whatever package building process you like.</p>
</div>
<div id="from-rmd-to-r" class="section level1">
<h1><span class="header-section-number">4</span> From Rmd to R</h1>
<p>I put this Rmd file under the <code>vignettes/</code> directory, and you do not have to use this directory. I’m using it because I will get a nice by-product after <code>R CMD build</code>, which is the <em>package vignette</em>. I used <strong>rmarkdown</strong> to generate an HTML vignette, which is visually pleasant to read in my eyes.</p>
<p>To extract the code chunks from the Rmd documents, I used a <code>Makefile</code> under the root directory of this package<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>:</p>
<pre class="sourceCode makefile"><code class="sourceCode makefile"><span class="dt">purl</span><span class="ch">=</span><span class="st">Rscript -e &quot;knitr::purl('</span><span class="ch">$(</span><span class="dt">1</span><span class="ch">)</span><span class="st">', '</span><span class="ch">$(</span><span class="dt">2</span><span class="ch">)</span><span class="st">', quiet=TRUE, documentation=0)&quot;</span>

<span class="dt">rfiles</span><span class="ch">:=$(</span><span class="kw">patsubst</span><span class="st"> vignettes/LP-%.Rmd</span><span class="kw">,</span><span class="st">R/%-GEN.R</span><span class="kw">,</span><span class="ch">$(</span><span class="kw">wildcard</span><span class="st"> vignettes/LP-*.Rmd</span><span class="ch">))</span>

<span class="dv">all:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">rfiles</span><span class="ch">)</span>

<span class="dv">R/%-GEN.R:</span><span class="dt"> vignettes/LP-%.Rmd</span>
    <span class="ch">$(</span><span class="kw">call</span><span class="st"> purl</span><span class="kw">,</span><span class="ch">$^</span><span class="kw">,</span><span class="ch">$@)</span></code></pre>
<p>I defined a function <code>purl</code> in the Makefile, which calls the R function <code>knitr::purl()</code> to extract code chunks from Rmd to R. To make sure I do not purl arbitrary Rmd documents, I added a prefix <code>LP-</code> to the Rmd filenames, and only these files will be processed. Similarly, to make sure <code>make</code> does not use arbitrary R files as targets, I added a suffix <code>-GEN</code> (stands for “generated”) to the R filenames. To put it short, an Rmd file <code>vignettes/LP-foo.Rmd</code> will generate <code>R/foo-GEN.R</code>. The variable <code>rfiles</code> stores all the potential R scripts to be generated. If you are familiar with <code>make</code>, you will immediately see its advantage here: <code>foo-GEN.R</code> will be re-generated only if <code>LP-foo.Rmd</code> has been updated.</p>
<p>You may have realized that this leads to two copies of R code: one copy in Rmd, and one in R. Therefore you need to remind your collaborators (if you have any) that they must not edit the R code under <code>R/</code> that is generated from Rmd, but should edit the Rmd source documents instead.</p>
</div>
<div id="one-button-to-rule-them-all" class="section level1">
<h1><span class="header-section-number">5</span> One Button to Rule Them All</h1>
<p>Now we have three things to do to fully build this package:</p>
<ol style="list-style-type: decimal">
<li>Run <code>make</code> to generate R source code to <code>R/</code>;</li>
<li>Run <strong>roxygen2</strong> to generate R documentation to <code>man/</code>, <code>NAMESPACE</code>, and other stuff;</li>
<li>Run <code>R CMD build</code> to build the package as well as the vignettes.</li>
</ol>
<p>You certainly do not want to type these commands repeatedly. Unfortunately, due to the fact that this is not the standard process of building an R package, there is not a natural solution to combine the three steps into one. For power users, this is certainly not true – you can always write a shell script to do everything. But some users just do not know how to open a terminal to type commands, and you should not blame them – not all people do programming for a living, and a command window is not the only or ultimate solution of all problems.</p>
<p>So let’s start hacking and find a button to click. I have been secretly hacking the <code>Build &amp; Reload</code> button in my RStudio IDE for a long time. If you open this package in RStudio, and go to <code>Tools -&gt; Project Options -&gt; Build Tools</code>, you will see a weird configuration:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">-v</span> <span class="kw">&amp;&amp;</span> <span class="kw">Rscript</span> -e <span class="st">&quot;Rd2roxygen::rab(install=TRUE, before=system('make'))&quot;</span></code></pre>
<p>At this moment, I’m not going to explain what it means since it is just a dirty hack, and please do not ask me, either. Let’s wait for the RStudio IDE to give us more freedom to customize the package build options in the future. If you are interested in the idea of LP for R packages, just copy my configuration, but bear in mind that it may stop working at some point. I will update this document when that happens.</p>
<p>My hack above may require some of my packages under development, so you need to update them before you can really click the button <code>Build &amp; Reload</code> in RStudio:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">update.packages</span>(<span class="dt">repos =</span> <span class="st">'http://yihui.name/xran'</span>, <span class="dt">type =</span> <span class="st">'source'</span>)</code></pre>
<p>Note <code>Rd2roxygen::rab()</code> is my own way of building R packages, and you certainly do not have to follow it. For example, if you are more comfortable with <strong>devtools</strong>, you can do<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">-v</span> <span class="kw">&amp;&amp;</span> <span class="kw">make</span> -C rlp <span class="kw">&amp;&amp;</span> <span class="kw">Rscript</span> -e <span class="st">&quot;devtools::install('rlp', keep_source=TRUE)&quot;</span> <span class="co">#</span></code></pre>
</div>
<div id="call-functions-in-this-package" class="section level1">
<h1><span class="header-section-number">6</span> Call Functions in This Package</h1>
<p>You can certainly load the package and call the functions in this document, because the package vignettes are compiled <em>after</em> the package is temporarily installed<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>. For example, I call <code>add_one()</code> defined above:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rlp)
<span class="kw">add_one</span>(<span class="dv">1</span>)</code></pre>
<pre><code>## [1] 2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">add_one</span>(<span class="dv">1</span>:<span class="dv">10</span>)</code></pre>
<pre><code>##  [1]  2  3  4  5  6  7  8  9 10 11</code></pre>
<p>Running live examples and generating output like this may help you explain what your functions actually do, so readers can understand your source code better, otherwise they can only reason about the code in their mind.</p>
</div>
<div id="a-less-naive-example" class="section level1">
<h1><span class="header-section-number">7</span> A Less Naive Example</h1>
<p>Life is certainly not always as simple as <code>add_one()</code>. In this section, I give a slightly more advanced example to show how LP can be useful and relevant to developing R packages. Let’s consider the maximum likelihood estimation (MLE) for the parameters of the Gamma distribution <span class="math">\(\Gamma(y; \alpha, \beta)\)</span>.</p>
<p>I will use the function <code>optim()</code> to optimize the log-likelihood function. First, I define an R function with arguments <code>data</code> and <code>start</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#' MLE for the Gamma distribution</span>
<span class="co">#' </span>
<span class="co">#' Estimate the parameters (alpha and beta) of the Gamma distribution using</span>
<span class="co">#' maximum likelihood.</span>
<span class="co">#' @param data the data vector assumed to be generated from the Gamma </span>
<span class="co">#'   distribution</span>
<span class="co">#' @param start the initial values for the parameters of the Gamma distribution </span>
<span class="co">#'   (passed to \code{\link{optim}()})</span>
<span class="co">#' @param vcov whether to return an approximate variance-covariance matrix of </span>
<span class="co">#'   the parameter vector</span>
<span class="co">#' @return A list with elements \code{estimate} (parameter estimates for alpha </span>
<span class="co">#'   and beta) and, if \code{vcov = TRUE}, \code{vcov} (the variance-covariance </span>
<span class="co">#'   matrix of the parameter vector).</span>
<span class="co">#' @export</span>
mle_gamma =<span class="st"> </span>function(data, <span class="dt">start =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">vcov =</span> <span class="ot">FALSE</span>) {</code></pre>
<p>The Gamma distribution has two commonly used parameterizations (shape-rate or shape-scale), and I will use the following probability density function (shape-rate):</p>
<p><span class="math">\[f(x|\alpha,\beta)=\frac{\beta^{\alpha}}{\Gamma(\alpha)}x^{\alpha-1}\exp(-\beta x);\quad x&gt;0\]</span></p>
<p>The log-density function is:</p>
<p><span class="math">\[\log f=\alpha\log\beta-\log\Gamma(\alpha)+(\alpha-1)\log x-\beta x\]</span></p>
<p>The log-likelihood function given the data vector <span class="math">\(\mathbf{x}=[x_1,x_2,\ldots,x_n]\)</span> will be:</p>
<p><span class="math">\[L(\alpha,\beta|\mathbf{x})=n(\alpha\log(\beta)-\log(\Gamma(\alpha)))+(\alpha-1)\sum_{i=1}^{n}\log(x_{i})-\beta\sum_{i=1}^{n}x_{i}\]</span></p>
<p>And I define it in R as <code>loglike()</code>, where <code>param</code> is the parameter vector <span class="math">\([\alpha, \beta]\)</span>, and <code>x</code> is the data vector:</p>
<pre class="sourceCode r"><code class="sourceCode r">  loglike =<span class="st"> </span>function(param, x) {
    a =<span class="st"> </span>param[<span class="dv">1</span>]  <span class="co"># alpha (the shape parameter)</span>
    b =<span class="st"> </span>param[<span class="dv">2</span>]  <span class="co"># beta (the rate parameter)</span>
    n =<span class="st"> </span><span class="kw">length</span>(x)
    n *<span class="st"> </span>(a *<span class="st"> </span><span class="kw">log</span>(b) -<span class="st"> </span><span class="kw">lgamma</span>(a)) +<span class="st"> </span>(a -<span class="st"> </span><span class="dv">1</span>) *<span class="st"> </span><span class="kw">sum</span>(<span class="kw">log</span>(x)) -<span class="st"> </span>b *<span class="st"> </span><span class="kw">sum</span>(x)
  }</code></pre>
<p>It is worth noting that in practice we will rarely translate the math equation to R code like that for the Gamma distribution, since R has the <code>dgamma()</code> function that is much more efficient than the raw log-density function I used above. You would use <code>sum(dgamma(x, shape = param[1], rate = param[2], log = TRUE))</code> instead. Anyway, I took the silly way just for demonstrating the LP idea instead of how to write efficient statistical computing code.</p>
<p>Next I optimize the log-likelihood function by passing the initial guesses and the data vector to it:</p>
<pre class="sourceCode r"><code class="sourceCode r">  opt =<span class="st"> </span><span class="kw">optim</span>(start, loglike, <span class="dt">x =</span> data, <span class="dt">hessian =</span> vcov, <span class="dt">control =</span> <span class="kw">list</span>(<span class="dt">fnscale =</span> -<span class="dv">1</span>))</code></pre>
<p>You need to be cautious that <code>optim()</code> minimizes the objective function by default, and that is why I used <code>control = list(fnscale = -1)</code>. Then I’m minimizing <code>-loglike</code>, and essentially maximizing <code>loglike</code>. I need to make sure the optimization has reached convergence:</p>
<pre class="sourceCode r"><code class="sourceCode r">  if (opt$convergence !=<span class="st"> </span><span class="dv">0</span>) <span class="kw">stop</span>(<span class="st">'optim() failed to converge'</span>)
  res =<span class="st"> </span><span class="kw">list</span>(<span class="dt">estimate =</span> opt$par)</code></pre>
<p>Finally, I give an estimate of the variance-covariance matrix <span class="math">\(Var([\hat{\alpha},\hat{\beta}]')\)</span> if <code>vcov = TRUE</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">  if (vcov) res$vcov =<span class="st"> </span><span class="kw">solve</span>(-opt$hessian)</code></pre>
<p>The estimate is the inverse of the negative Hessian matrix, because <span class="math">\(Var(\hat{\theta})=I^{-1}(\theta)\)</span> for the maximum likelihood estimator <span class="math">\(\hat{\theta}\)</span>, where <span class="math">\(I(\theta)\)</span> is the Information matrix, and we know <span class="math">\(I(\theta) = -E(H(\theta))\)</span>. In theory, <span class="math">\(I(\theta)\)</span> is unknown, and I just use the observed information matrix, i.e., the negative Hessian matrix returned from <code>optim()</code>. Note the inverse matrix is computed via <code>solve()</code>.</p>
<pre class="text"><code>  res
}</code></pre>
<p>The object <code>res</code> is returned, and we can use it to compute the confidence intervals of the parameters since MLE is asymptotically Normal. Now let’s try the function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1228</span>)
d =<span class="st"> </span><span class="kw">rgamma</span>(<span class="dv">100</span>, <span class="dt">shape =</span> <span class="dv">5</span>, <span class="dt">rate =</span> <span class="dv">2</span>)  <span class="co"># simulate some data from Gamma(5, 2)</span>
r =<span class="st"> </span><span class="kw">mle_gamma</span>(d, <span class="dt">vcov =</span> <span class="ot">TRUE</span>)
<span class="kw">str</span>(r)</code></pre>
<pre><code>## List of 2
##  $ estimate: num [1:2] 5.3 2.06
##  $ vcov    : num [1:2, 1:2] 0.529 0.206 0.206 0.088</code></pre>
<p>The estimates are not too bad, compared to their true values. I can also give a 95% confidence interval for the parameter <span class="math">\(\alpha\)</span>, of which the estimate is asymptotically Normal:</p>
<pre class="sourceCode r"><code class="sourceCode r">a =<span class="st"> </span>r$estimate[<span class="dv">1</span>]  <span class="co"># estimate of alpha</span>
s =<span class="st"> </span><span class="kw">sqrt</span>(r$vcov[<span class="dv">1</span>, <span class="dv">1</span>])  <span class="co"># standard error of the estimate of alpha</span>
z =<span class="st"> </span><span class="kw">qnorm</span>(<span class="dv">1</span> -<span class="st"> </span><span class="fl">0.05</span>/<span class="dv">2</span>)  <span class="co"># 97.5% Normal quantile</span>
<span class="kw">c</span>(a -<span class="st"> </span>z *<span class="st"> </span>s, a +<span class="st"> </span>z *<span class="st"> </span>s)  <span class="co"># a 95% CI</span></code></pre>
<pre><code>## [1] 3.875568 6.726619</code></pre>
<p>Below is a histogram of the simulated data, with the true density curve, the true mean (solid vertical line), and the estimated mean<a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> (dashed line):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, .<span class="dv">2</span>, .<span class="dv">1</span>))
<span class="kw">hist</span>(d, <span class="dt">main =</span> <span class="st">''</span>, <span class="dt">col =</span> <span class="st">'darkgray'</span>, <span class="dt">border =</span> <span class="st">'white'</span>, <span class="dt">freq =</span> <span class="ot">FALSE</span>)
<span class="kw">curve</span>(<span class="kw">dgamma</span>(x, <span class="dt">shape =</span> <span class="dv">5</span>, <span class="dt">rate =</span> <span class="dv">2</span>), <span class="dv">0</span>, <span class="dv">6</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)
<span class="kw">abline</span>(<span class="dt">v =</span> <span class="kw">c</span>(<span class="dv">5</span>/<span class="dv">2</span>, r$estimate[<span class="dv">1</span>]/r$estimate[<span class="dv">2</span>]), <span class="dt">lty =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</code></pre>
<div class="figure">
<img src="data:image/png;base64,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" />
</div>
<p>Now you see I can thoroughly explain an R function using LP. I’m not saying this is what you should do for all R functions, but sometimes there are cases in which you want something beyond code comments, such as math equations and graphics.</p>
<p>Apparently LP is more for those who want to understand your source code (including your future self!) than for end-users of your package. For most users, they probably just want to read the help page of the function, in which case they just type the question mark in R, e.g., <code>?mle_gamma</code>.</p>
</div>
<div id="chunk-references" class="section level1">
<h1><span class="header-section-number">8</span> Chunk References</h1>
<p>I mentioned before that we could label code chunks and reference them to compose a bigger code chunk. Now I show a simple example of simulating from a bivariate Normal distribution. A bit background:</p>
<p><span class="math">\[\left[\begin{array}{c}
X\\
Y
\end{array}\right]\sim\mathcal{N}\left(\left[\begin{array}{c}
\mu_{X}\\
\mu_{Y}
\end{array}\right],\left[\begin{array}{cc}
\sigma_{X}^{2} &amp; \rho\sigma_{X}\sigma_{Y}\\
\rho\sigma_{X}\sigma_{Y} &amp; \sigma_{Y}^{2}
\end{array}\right]\right)\]</span></p>
<p>One way to simulate from the bivariate Normal distribution is to first simulate from the marginal distribution <span class="math">\(f(x)\)</span>, then simulate from <span class="math">\(f(y|x)\)</span>. Below is the final simulation function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#' Sample from a bivariate Normal distribution</span>
<span class="co">#' </span>
<span class="co">#' Simulate x from the marginal f(x), then y from f(y|x), and the pair (x, y) </span>
<span class="co">#' has the desired joint distribution.</span>
<span class="co">#' @param n the desired sample size</span>
<span class="co">#' @param m1,m2 the means of X and Y, respectively</span>
<span class="co">#' @param s1,s2 the standard deviations of X and Y, respectively</span>
<span class="co">#' @param rho the correlation coefficient between X and Y</span>
<span class="co">#' @return A numeric matrix of two columns X and Y.</span>
<span class="co">#' @export</span>
rbinormal =<span class="st"> </span>function(n, <span class="dt">m1 =</span> <span class="dv">0</span>, <span class="dt">m2 =</span> <span class="dv">0</span>, <span class="dt">s1 =</span> <span class="dv">1</span>, <span class="dt">s2 =</span> <span class="dv">1</span>, <span class="dt">rho =</span> <span class="dv">0</span>) {
  <span class="co"># warning: this is not an efficient implementation; you should use</span>
  <span class="co"># vectorization in practice</span>
  res =<span class="st"> </span><span class="kw">replicate</span>(n, {
    x =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>, m1, s1)  <span class="co"># simulate from the marginal f(x)</span>
    m2cond =<span class="st"> </span>m2 +<span class="st"> </span>s2/s1 *<span class="st"> </span>rho *<span class="st"> </span>(x -<span class="st"> </span>m1)  <span class="co"># conditional mean of Y</span>
    s2cond =<span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">1</span> -<span class="st"> </span>rho^<span class="dv">2</span>) *<span class="st"> </span>s2  <span class="co"># conditional sd of Y</span>
    y =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>, m2cond, s2cond)  <span class="co"># simulate from the conditional f(y|x)</span>
    <span class="kw">c</span>(x, y)
  })
  res =<span class="st"> </span><span class="kw">t</span>(res)  <span class="co"># transpose the 2xn matrix to nx2</span>
  <span class="kw">colnames</span>(res) =<span class="st"> </span><span class="kw">c</span>(<span class="st">'X'</span>, <span class="st">'Y'</span>)
  res
}</code></pre>
<p>If you are reading the source R Markdown document, you will see <code>&lt;&lt;simulate_x&gt;&gt;</code> and <code>&lt;&lt;simulate_y&gt;&gt;</code> instead of the real R code. The token <code>&lt;&lt;&gt;&gt;</code> denotes the code chunks defined below with the chunk labels <code>simulate_x</code> and <code>simulate_y</code>, respectively:</p>
<pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>, m1, s1)  <span class="co"># simulate from the marginal f(x)</span></code></pre>
<p>The marginal distribution of <span class="math">\(X\)</span> is <span class="math">\(\mathcal{N}(\mu_X, \sigma^2_X)\)</span>, and we know the conditional distribution of <span class="math">\(Y|X\)</span> is:</p>
<p><span class="math">\[Y|X=x \sim \mathcal{N}\left(\mu_{Y}+\frac{\sigma_{Y}}{\sigma_{X}}\rho(x-\mu_{X}),\,(1-\rho^{2})\sigma_{Y}^{2}\right)\]</span></p>
<pre class="sourceCode r"><code class="sourceCode r">m2cond =<span class="st"> </span>m2 +<span class="st"> </span>s2/s1 *<span class="st"> </span>rho *<span class="st"> </span>(x -<span class="st"> </span>m1)  <span class="co"># conditional mean of Y</span>
s2cond =<span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">1</span> -<span class="st"> </span>rho^<span class="dv">2</span>) *<span class="st"> </span>s2  <span class="co"># conditional sd of Y</span>
y =<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">1</span>, m2cond, s2cond)  <span class="co"># simulate from the conditional f(y|x)</span></code></pre>
<p>I just reused these code chunks in the function body of <code>rbinormal()</code>, instead of cutting and pasting the code there. As usual, I can test my function by examples:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">1229</span>)
z =<span class="st"> </span><span class="kw">rbinormal</span>(<span class="dv">500</span>, <span class="dt">m1 =</span> -<span class="dv">1</span>, <span class="dt">s1 =</span> <span class="dv">5</span>, <span class="dt">m2 =</span> <span class="dv">3</span>, <span class="dt">s2 =</span> .<span class="dv">5</span>, <span class="dt">rho =</span> -.<span class="dv">7</span>)
<span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, .<span class="dv">2</span>, .<span class="dv">1</span>))
<span class="kw">plot</span>(z, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">col =</span> <span class="st">'darkgray'</span>)
<span class="kw">points</span>(-<span class="dv">1</span>, <span class="dv">3</span>, <span class="dt">pch =</span> <span class="dv">19</span>, <span class="dt">col =</span> <span class="st">'red'</span>)  <span class="co"># the center of the bivariate dist</span></code></pre>
<div class="figure">
<img src="data:image/png;base64,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" />
</div>
<p>In this example, I factored out the code from the main function as two separate code chunks, and explained each later, instead of inserting the explanations in the middle of the function body. Again, the simulation code in this example is computationally inefficient, and it is only for demo purposes<a href="#fn7" class="footnoteRef" id="fnref7"><sup>7</sup></a>.</p>
</div>
<div id="conclusions" class="section level1">
<h1><span class="header-section-number">9</span> Conclusions</h1>
<p>This document has demonstrated that LP can be useful for package authors to explain their code in fine detail, which may not be easy to achieve by only using comments in code. Not everyone needs or wants to understand your source code, but clear explanations of your code will benefit both your future self, and more importantly, attract potential collaborators and contributors, hence increase the <a href="http://en.wikipedia.org/wiki/Bus_factor">bus factor</a> of your software packages, in this era of “<a href="https://github.com">social coding</a>”.</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>This is not entirely surprising, considering Knuth’s original implementation of LP using TeX and Pascal.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>By “readable”, I mean no backslashes. Raw LaTeX math code does not count. At least it is not readable to me. I can never figure out where the brackets start and end by reading raw LaTeX code, for example, when there are more than three pairs of brackets.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>If you read the R Markdown source of this document, you will see I did not copy the Makefile here, but used the <code>cat</code> engine to write the Makefile dynamically to the output.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>Remember to replace <code>rlp</code> with your package name.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>If you use <strong>devtools</strong>, please note it does not build vignettes by default, so you have to call <code>devtools::install(..., build_vignettes = TRUE)</code><a href="#fnref5">↩</a></p></li>
<li id="fn6"><p>The mean of the Gamma distribution is <span class="math">\(\alpha/\beta\)</span>.<a href="#fnref6">↩</a></p></li>
<li id="fn7"><p>It is straightforward to make it much more efficient by vectorization, i.e., instead of using <code>replicate()</code>, which is basically a loop to generate one random number at a time, you can just generate all <code>n</code> random numbers in one step: <code>x = rnorm(n, m1, s1)</code>, and <code>y = rnorm(n, m2cond, s2cond)</code>.<a href="#fnref7">↩</a></p></li>
</ol>
</div>

<script type="text/javascript">
window.onload = function() {
  var i, fig = 1, caps = document.getElementsByClassName('caption');
  for (i = 0; i < caps.length; i++) {
    var cap = caps[i];
    if (cap.parentElement.className !== 'figure' || cap.nodeName !== 'P')
      continue;
    cap.innerHTML = '<span>Figure ' + fig + ':</span> ' + cap.innerHTML;
    fig++;
  }
  fig = 1;
  caps = document.getElementsByTagName('caption');
  for (i = 0; i < caps.length; i++) {
    var cap = caps[i];
    if (cap.parentElement.nodeName !== 'TABLE') continue;
    cap.innerHTML = '<span>Table ' + fig + ':</span> ' + cap.innerHTML;
    fig++;
  }
}
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
